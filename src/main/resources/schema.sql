-- Table: USER
CREATE TABLE IF NOT EXISTS users (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    name VARCHAR(500) NOT NULL,
    date_of_birth DATE NOT NULL,
    password VARCHAR(500) NOT NULL CHECK (char_length(password) BETWEEN 8 AND 500)
);

-- Table ACCOUNT
CREATE TABLE IF NOT EXISTS account (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    user_id BIGINT UNIQUE NOT NULL REFERENCES users(id) ON DELETE CASCADE,
    initial_balance DECIMAL (19,2),
    current_balance DECIMAL (19,2)
);

-- Table: EMAIL_DATA
CREATE TABLE IF NOT EXISTS email_data (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    user_id BIGINT NOT NULL REFERENCES users(id) ON DELETE CASCADE,
    email VARCHAR (200) UNIQUE NOT NULL
);

-- Table: PHONE_DATA
CREATE TABLE IF NOT EXISTS phone_data (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    user_id BIGINT NOT NULL REFERENCES users(id) ON DELETE CASCADE,
    phone VARCHAR(13) UNIQUE NOT NULL CHECK (phone ~ '^7\d{10}$')
);


